<!DOCTYPE html>
<html class="x-admin-sm">
    
      <head>
        <meta charset="UTF-8">
        <title>舟楫后台登录</title>
        <meta name="renderer" content="webkit|ie-comp|ie-stand">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
        <meta http-equiv="Cache-Control" content="no-siteapp" />
        <link rel="stylesheet" href="../static/css/font.css">
        <link rel="stylesheet" href="../static/css/xadmin.css">
        <!-- <link rel="stylesheet" href="static/css/theme5.css"> -->
        <script src="../static/lib/layui/layui.js" charset="utf-8"></script>
        <script type="text/javascript" src="../static/js/xadmin.js"></script>
        <!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
        <!--[if lt IE 9]>
          <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
          <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
        <script>
            // 是否开启刷新记忆tab功能
            // var is_remember = false;
        </script>
    </head>
    <body>

        <div class="layui-fluid">
            <div class="layui-row">
                <form method="post" class="layui-form">
                    <!-- <div>company:{{ company_lists[0].Company_Name }}</div> -->
                    <div class="layui-form-item">
                        <label for="name" class="layui-form-label">

                            <span class="x-red">*</span>姓名</label>
                        <div class="layui-input-inline">
                            <input type="text" id="username" name="username" required="" lay-verify="required" autocomplete="off" class="layui-input"></div>
                    </div>
                    <div class="layui-form-item">
                        <label for="sex" class="layui-form-label">
                            <span class="x-red">*</span>性别</label>
                        <div class="layui-input-inline">
                            <select id="sex" name="sex" class="valid">
                                <option value="男">男</option>
                                <option value="女">女</option></select>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label for="unit" class="layui-form-label">
                            <span class="x-red">*</span>当前所属单位</label>
                        <div class="layui-input-inline">
                            <select id="unit" name="unit" class="valid">
                                {% for company in company_lists %}

                                    <option value={{ company}}>{{ company}}</option>
                                {% endfor %}
                                <!--Alibaba-->
                                <!--Tencent-->
                                <!--ByteDance-->
                                <!--Baidu-->
                                <!--JD-->
                                <!--Meituan-->
                                <!--FerryTalentMS-->
                                <!--DiDi-->
                                <!--Kwai-->
<!--
                                <option value="ByteDance">ByteDance</option>
                                <option value="Alibaba">Alibaba</option>
                                <option value="Baidu">Baidu</option>
                                <option value="JD">JD</option>
                                <option value="Meituan">Meituan</option>
                                <option value="FerryTalentMS">FerryTalentMS</option>
                                <option value="DiDi">DiDi</option>
                                <option value="Kwai">Kwai</option>
-->
                                </select>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label for="phone" class="layui-form-label">
                            <span class="x-red">*</span>手机</label>
                        <div class="layui-input-inline">
                            <input type="text" id="phone" name="phone" required="" lay-verify="phone" autocomplete="off" class="layui-input"></div>
                    </div>
                    <div class="layui-form-item">
                        <label for="identify" class="layui-form-label">
                            <span class="x-red">*</span>身份证号</label>
                        <div class="layui-input-inline">
                            <input type="text" id="identify" name="identify" required="" lay-verify="required" autocomplete="off" class="layui-input"></div>
                    </div>
                    <div class="layui-form-item">
                        <label for="duty" class="layui-form-label">
                            <span class="x-red">*</span>职务</label>
                        <div class="layui-input-inline">
                            <select id="duty" name="duty" class="valid">
                                <option value="主管">主管</option>
                                <option value="经理">经理</option>
                                <option value="HR">HR</option>
                                <option value="开发">开发</option>
                                <option value="员工">员工</option>
                                <option value="小组长">小组长</option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label for="identify" class="layui-form-label">
                            <span class="x-red">*</span>年龄</label>
                        <div class="layui-input-inline">
                            <input type="text" id="years" name="years" required="" lay-verify="required" autocomplete="off" class="layui-input"></div>
                    </div>
                    <div class="layui-form-item">
                        <label for="origin" class="layui-form-label">
                            <span class="x-red">*</span>籍贯</label>
                        <div class="layui-input-inline">
                            <input type="text" id="origin" name="origin" required="" lay-verify="required" autocomplete="off" class="layui-input"></div>
                    </div>
                    <div class="layui-form-item">
                        <label for="gladuate_college" class="layui-form-label">
                            <span class="x-red">*</span>毕业院校</label>
                        <div class="layui-input-inline">
                            <input type="text" id="gladuate_college" name="gladuate_college" required="" lay-verify="required" autocomplete="off" class="layui-input"></div>
                    </div>
                    <div class="layui-form-item">
                        <label for="major" class="layui-form-label">
                            <span class="x-red">*</span>专业</label>
                        <div class="layui-input-inline">
                            <input type="text" id="major" name="major" required="" lay-verify="required" autocomplete="off" class="layui-input"></div>
                    </div>
                    <div class="layui-form-item">
                        <label for="degree" class="layui-form-label">
                            <span class="x-red">*</span>学历</label>
                        <div class="layui-input-inline">
                            <select id="degree" name="degree" class="valid">
                                <option value="大专">大专</option>
                                <option value="本科">本科</option>
                                <option value="硕士">硕士</option>
                                <option value="博士">博士</option></select>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label for="marriage" class="layui-form-label">
                            <span class="x-red">*</span>婚姻状况</label>
                        <div class="layui-input-inline">
                            <select id="marriage" name="marriage" class="valid">
                                <option value="已婚">已婚</option>
                                <option value="未婚">未婚</option></select>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label for="politic" class="layui-form-label">
                            <span class="x-red">*</span>政治面貌</label>
                        <div class="layui-input-inline">
                            <select id="politic" name="politic" class="valid">
                                <option value="中共党员">中共党员</option>
                                <option value="共青团员">共青团员</option>
                                <option value="群众">群众</option>
                                <option value="民主派人士">民主派人士</option> </select>
                        </div>
                    </div>
                    <!--
                    <div class="layui-form-item">
                        <label for="nation" class="layui-form-label">
                            <span class="x-red">*</span>民族</label>
                        <div class="layui-input-inline">
                            <input type="text" id="nation" name="nation" required="" lay-verify="required" autocomplete="off" class="layui-input"></div>
                    </div>
                    <div class="layui-form-item">
                        <label for="section" class="layui-form-label">
                            <span class="x-red">*</span>部门</label>
                        <div class="layui-input-inline">
                            <select id="section" name="section" class="valid">
                                <option value="财务部r">财务部</option>
                                <option value="销售部">销售部</option>
                                <option value="采购">采购</option>></select>
                        </div>
                    </div>
                    -->


                    <!-- 不需要日期就注释掉
                    <div class="layui-form-item">
                        <label for="into_date" class="layui-form-label">
                            <span class="x-red">*</span>入职日期</label>
                        <div class="layui-input-inline">
                            <input type="date" id="into_date" name="into_date"  class="layui-input"></div>
                    </div>
                    <div class="layui-form-item">
                        <label for="contract_date" class="layui-form-label">
                            <span class="x-red">*</span>最近一次签订合同日期</label>
                        <div class="layui-input-inline">
                            <input type="date" id="contract_date" name="contract_date"  class="layui-input"></div>
                    </div>
                    <div class="layui-form-item">
                        <label for="born_date" class="layui-form-label">
                            <span class="x-red">*</span>出生日期</label>
                        <div class="layui-input-inline">
                            <input type="date" id="born_date" name="born_date"  class="layui-input"></div>
                    </div>

                    <div class="layui-form-item layui-form-text">
                        <label for="achievement" class="layui-form-label">个人成果</label>
                        <div class="layui-input-block">
                            <textarea placeholder="请输入内容" id="achievement" name="achievement" class="layui-textarea"></textarea>
                        </div>
                    </div>

                    -->
                    <div class="layui-form-item layui-form-text">
                        <label for="history_unit" class="layui-form-label">历史工作单位</label>

                        <div class="layui-input-block">
                            <!--
                            <textarea placeholder="请输入内容" id="history_unit" name="history_unit" class="layui-textarea"></textarea>
                        -->
                            {% for company in company_lists %}
                                <input name='history_unit_check' type="checkbox" value={{ company }}><label>{{ company }}</label>

                            {% endfor %}
                        </div>
                        <input type="button" onclick="chk()" value="确认"/>
                        <textarea  id="history_unit" name="history_unit" class="layui-textarea" disabled="disabled"></textarea>
                    </div>
                    <div class="layui-form-item">
                        <label for="L_repass" class="layui-form-label"></label>
                        <button class="layui-btn" lay-filter="add" lay-submit="">增加</button>
                        <button class="layui-btn" lay-filter="reset" lay-submit="" type="reset">重置</button>
                    </div>
        </form>
        </div>
        </div>
        <script>

            function chk() {
                var obj = document.getElementsByName('history_unit_check');
                console.log(obj);
                var s = '';
                for (var i = 0; i < obj.length; i++) {
                    if (obj[i].checked) s += obj[i].value + ',';
                }
                if (s=='')
                    document.getElementById("history_unit").value="empty";
                else
                    document.getElementById("history_unit").value=s;

            }

        </script>

        <script>layui.use(['form', 'layer'],
            function() {
                $ = layui.jquery;
                var form = layui.form,
                layer = layui.layer;

                //自定义验证规则
                form.verify({
                    nikename: function(value) {
                        if (value.length < 5) {
                            return '昵称至少得5个字符啊';
                        }
                    },
                    pass: [/(.+){6,12}$/, '密码必须6到12位'],
                    repass: function(value) {
                        if ($('#L_pass').val() != $('#L_repass').val()) {
                            return '两次密码不一致';
                        }
                    }
                });

                //监听提交
                form.on('submit(add)',
                function(data) {
                    console.log(data);
                    //发异步，把数据提交给后端
                    $.ajax({
                        url:"/staff_add",
                        type:"post",
                        data: "username=" + $("#username").val()
                           +"&sexual="+$("#sex").val()+"&id="+$("#identify").val()+"&origin="+
                           $("#origin").val()+
                            {#"&nation="+$("#nation").val()+#}
                            "&gladuate_college="+$("#gladuate_college").val()
                            +"&major="+$("#major").val()+"&degree="+$("#degree").val()+"&marriage="+$("#marriage").val()+"&politic="+$("#politic").val()
                            +"&phone="+$("#phone").val()+"&unit="+$("#unit").val()
                            {#"&section="+$("#section").val()+#}
                            +"&duty="+$("#duty").val()
                    {#+"&into_date="+$("#into_date").val()+"&contract_date="+$("#contract_date").val()+"&born_date="+$("#born_date").val()#}
                    {#+"&achievement="+$("#achievement").val()#}
                            +"&history_unit="+$("#history_unit").val()+"&years="+$("#years").val(),
                        //发送请求成功后执行
                        success:function (data) {
                           if(data=="1"){
                               layer.alert("增加成功", {
                                   icon: 6
                                   },
                                   function() {
                                        //关闭当前frame
                                        xadmin.close();
                                        // 可以对父窗口进行刷新
                                        xadmin.father_reload();
                               });
                           }
                           else if(data=="2"){
                           alert("用户已存在")
                           }
                        },
                        error:function () {
                            alert("请求失败！")
                        }
                    });
                    return false;
                });

            });</script>
        <script>var _hmt = _hmt || []; (function() {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?b393d153aeb26b46e9431fabaf0f6190";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
            })();</script>
    </body>

</html>